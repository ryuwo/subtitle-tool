<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìë§‰ ì˜¤ì—­ ìˆ˜ì • ë„êµ¬</title>
    
    <!-- CORS ì •ì±… ì„¤ì • -->
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <div class="container">
    <header>
        <div class="header-content">
            <img src="logo.png" alt="íšŒì‚¬ ë¡œê³ " class="company-logo">
            <h1>FixSub</h1>
        </div>
        <p>Google Sheets ê¸°ë°˜ ì˜¤ì—­ ìˆ˜ì • ì‹œìŠ¤í…œ</p>
    </header>

        <main>
        
            <section class="connection-section">
                <h2>ğŸ“Š Google Sheets ì—°ê²°</h2>
                <input type="text" id="spreadsheet-url" placeholder="Google Sheets ê³µìœ  ë§í¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”">
                <button onclick="connectToSheets()">ì—°ê²°í•˜ê¸°</button>
                <div id="connection-status" class="status"></div>
            </section>

            <section class="dictionary-section">
                <h2>ğŸ“‘ ì˜¤ì—­ ì‚¬ì „ í˜„í™©</h2>
                <div class="dict-info">
                    <span>í˜„ì¬ ë“±ë¡ëœ ì˜¤ì—­ í•­ëª©: <strong id="dict-count">0</strong>ê°œ</span>
                    <button onclick="refreshDictionary()">ìƒˆë¡œê³ ì¹¨</button>
                </div>
                <div id="dict-preview" class="dict-preview"></div>
            </section>

            <section class="process-section">
    <h2>ğŸ” ìë§‰ ì˜¤í‘œê¸° ìˆ˜ì • (1ë‹¨ê³„)</h2>
    <div class="file-upload">
        <input type="file" id="subtitle-file" accept=".srt,.vtt">
        <button onclick="processFile()">ì˜¤ë¥˜ íƒìƒ‰í•˜ê¸°</button>
    </div>
    
    <div class="text-areas">
        <div class="text-area-container">
            <h3>ì›ë³¸ ìë§‰</h3>
            <textarea id="original-subtitle" placeholder="ìë§‰ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”"></textarea>
        </div>
        <div class="text-area-container">
            <h3>ìˆ˜ì • ëª©ë¡</h3>
            <textarea id="processed-subtitle" readonly placeholder="ìˆ˜ì •ëœ ì˜¤í‘œê¸° ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤"></textarea>
            <button onclick="downloadResult()">ìˆ˜ì •ë³¸ ë‹¤ìš´ë¡œë“œ</button>
        </div>
    </div>
    
    <!-- ì „ì²´ ìˆ˜ì •ëœ ìë§‰ ì €ì¥ìš© (ìˆ¨ê²¨ì§„ textarea) -->
    <textarea id="full-corrected-subtitle" style="display: none;"></textarea>
</section>

    <section class="validation-section">
        <h2>ğŸ” Segment ê²€ìˆ˜ (2ë‹¨ê³„)</h2>
        <div class="validation-upload">
            <input type="file" id="validation-file" accept=".srt,.vtt">
            <button onclick="validateFile()">ê²€ìˆ˜í•˜ê¸°</button>
            <button onclick="validateFromStep1()" style="background-color: #27ae60;">1ë‹¨ê³„ ê²°ê³¼ ê²€ìˆ˜</button>
        </div>
    
        <div class="validation-result">
            <h3>ê²€ìˆ˜ ê²°ê³¼</h3>
            <textarea id="validation-result" readonly placeholder="Segment ëˆ„ë½, Segment ë¶„ë¦¬, í•œêµ­ì–´ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ê²€ì¶œë  ì‹œ ì§ì ‘ ìˆ˜ì •í•´ì£¼ì„¸ìš”.

 â—ï¸ SegmentëŠ” 1ë²ˆë¶€í„° ì‹œì‘ë˜ì–´ì•¼ í•©ë‹ˆë‹¤ â—ï¸

ì˜ëª»ëœ ì˜ˆì‹œ)
1
00:00:33,500 --> 00:00:35,835
An era of injustice.
3   
00:00:36,736 --> 00:00:38,204
ì œë°œ!   

â¬†ï¸ í•œêµ­ì–´ ê²€ì¶œ, segment ë¶„ë¦¬ ì—¬ë¶€, 2ë²ˆ segment ëˆ„ë½ ê²€ì¶œ ëŒ€ìƒ

            "></textarea>
        </div>
        </section>

<section class="speaker-section">
    <h2>ğŸ” ë“œë¼ë§ˆ í™”ì ëˆ„ë½ ê²€ì¶œ (3ë‹¨ê³„)</h2>
    <div class="speaker-upload">
        <input type="file" id="speaker-file" accept=".srt,.vtt">
        <button onclick="checkSpeakers()">í™”ì ëˆ„ë½ ê²€ì‚¬</button>
        <button onclick="checkSpeakersFromPrevious()" style="background-color: #28a745;">ì´ì „ ë‹¨ê³„ ê²°ê³¼ ê²€ì‚¬</button>
    </div>
    <div class="speaker-result">
        <h3>í™”ì ëˆ„ë½ ê²€ì‚¬ ê²°ê³¼</h3>
        <textarea id="speaker-result" readonly placeholder="í™”ì ëˆ„ë½ ê²€ì‚¬ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤

ì˜ëª»ëœ ì˜ˆì‹œ)
1
00:00:33,500 --> 00:00:35,835
An era of injustice.

â¬‡ï¸ í™”ì ëˆ„ë½: ìˆ˜ì • í•„ìš”

1
00:00:33,500 --> 00:00:35,835
Kang Dong-ju: An era of injustice."></textarea>
    </div>
</section>


        </main>
    </div>

    <!-- Google APIë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œ -->
    <script src="config.js"></script>
    <script>
        // Google API ë™ì  ë¡œë”©
        function loadGoogleAPI() {
            const script = document.createElement('script');
            script.src = 'https://apis.google.com/js/api.js';
            script.onload = function() {
                initializeGoogleAPI();
            };
            script.onerror = function() {
                console.error('Google API ë¡œë“œ ì‹¤íŒ¨');
                updateConnectionStatus('Google API ë¡œë“œ ì‹¤íŒ¨', 'error');
            };
            document.head.appendChild(script);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ API ë¡œë“œ
        window.addEventListener('load', loadGoogleAPI);
    </script>
    <script src="subtitle-processor.js"></script>
</body>
</html>
